{"ast":null,"code":"import axios from \"axios\";\nimport { call, put, takeLatest } from \"redux-saga/effects\";\nimport { fetchEventsFailure, fetchEventsSuccess, fetchResourcesFailure, fetchResourcesSuccess } from \"./actions\";\nimport { FETCH_EVENTS_REQUEST, FETCH_RESOURCES_REQUEST } from \"./actionTypes\";\nconst getEvents = () => axios.post(\"http://localhost:5010/events\");\nconst getResources = ids => {\n  return axios.post(\"http://localhost:5010/resources\", {\n    ids: ids\n  });\n};\nfunction* fetchEventsSaga() {\n  try {\n    const {\n      data\n    } = yield call(getEvents);\n    yield put(fetchEventsSuccess({\n      events: data\n    }));\n  } catch (error) {\n    fetchEventsFailure({\n      error: error.message\n    });\n  }\n}\nfunction fetchResourcesSaga(_ref) {\n  let {\n    ids\n  } = _ref;\n  return function* () {\n    try {\n      const {\n        data: {\n          data: {\n            items\n          }\n        }\n      } = yield call(getResources, ids);\n      yield put(fetchResourcesSuccess({\n        resources: items\n      }));\n    } catch (error) {\n      fetchResourcesFailure({\n        error: error.message\n      });\n    }\n  }();\n}\nfunction* eventsSaga() {\n  yield takeLatest(FETCH_EVENTS_REQUEST, fetchEventsSaga);\n  yield takeLatest(FETCH_RESOURCES_REQUEST, fetchResourcesSaga);\n}\nexport default eventsSaga;","map":{"version":3,"names":["axios","call","put","takeLatest","fetchEventsFailure","fetchEventsSuccess","fetchResourcesFailure","fetchResourcesSuccess","FETCH_EVENTS_REQUEST","FETCH_RESOURCES_REQUEST","getEvents","post","getResources","ids","fetchEventsSaga","data","events","error","message","fetchResourcesSaga","items","resources","eventsSaga"],"sources":["/Users/lusinetsatinyan/Desktop/Moshi/frontend/src/store/events/sagas.ts"],"sourcesContent":["import axios, { AxiosResponse, AxiosError } from \"axios\";\nimport { SagaIterator } from 'redux-saga';\nimport {call, put, takeLatest} from \"redux-saga/effects\";\n\nimport {fetchEventsFailure, fetchEventsSuccess, fetchResourcesFailure, fetchResourcesSuccess} from \"./actions\";\nimport {FETCH_EVENTS_REQUEST, FETCH_RESOURCES_REQUEST} from \"./actionTypes\";\nimport {FetchResourcesRequest, IEvents, IItems, IResources} from \"./types\";\n\nconst getEvents = () => axios.post<IEvents[]>(\"http://localhost:5010/events\");\n\nconst getResources = (ids: string[]) => {\n\treturn axios.post<number>(\"http://localhost:5010/resources\", {\n\t\tids: ids\n\t});\n}\n\nfunction* fetchEventsSaga(): SagaIterator {\n\ttry {\n\t\tconst { data }: AxiosResponse<{ items: IItems[] }> = yield call(getEvents)\n\t\tyield put(\n\t\t\tfetchEventsSuccess({\n\t\t\t\tevents: data,\n\t\t\t})\n\t\t);\n\t} catch (error) {\n\t\tfetchEventsFailure({\n\t\t\terror: (error as AxiosError<{ message: string }>).message,\n\t\t})\n\t}\n}\n\nfunction* fetchResourcesSaga({ ids }: FetchResourcesRequest): SagaIterator {\n\ttry {\n\t\tconst { data: {data: {items} } }: AxiosResponse<{ data: { items: IResources[] } }> = yield call(getResources, ids);\n\t\tyield put(\n\t\t\tfetchResourcesSuccess({\n\t\t\t\tresources: items\n\t\t\t})\n\t\t);\n\t} catch (error) {\n\t\tfetchResourcesFailure({\n\t\t\terror: (error as AxiosError<{ message: string }>).message,\n\t\t})\n\t}\n}\n\n\nfunction* eventsSaga() {\n\tyield takeLatest(FETCH_EVENTS_REQUEST, fetchEventsSaga);\n\tyield takeLatest(FETCH_RESOURCES_REQUEST, fetchResourcesSaga);\n\n}\n\nexport default eventsSaga;"],"mappings":"AAAA,OAAOA,KAAK,MAAqC,OAAO;AAExD,SAAQC,IAAI,EAAEC,GAAG,EAAEC,UAAU,QAAO,oBAAoB;AAExD,SAAQC,kBAAkB,EAAEC,kBAAkB,EAAEC,qBAAqB,EAAEC,qBAAqB,QAAO,WAAW;AAC9G,SAAQC,oBAAoB,EAAEC,uBAAuB,QAAO,eAAe;AAG3E,MAAMC,SAAS,GAAG,MAAMV,KAAK,CAACW,IAAI,CAAY,8BAA8B,CAAC;AAE7E,MAAMC,YAAY,GAAIC,GAAa,IAAK;EACvC,OAAOb,KAAK,CAACW,IAAI,CAAS,iCAAiC,EAAE;IAC5DE,GAAG,EAAEA;EACN,CAAC,CAAC;AACH,CAAC;AAED,UAAUC,eAAe,GAAiB;EACzC,IAAI;IACH,MAAM;MAAEC;IAAyC,CAAC,GAAG,MAAMd,IAAI,CAACS,SAAS,CAAC;IAC1E,MAAMR,GAAG,CACRG,kBAAkB,CAAC;MAClBW,MAAM,EAAED;IACT,CAAC,CAAC,CACF;EACF,CAAC,CAAC,OAAOE,KAAK,EAAE;IACfb,kBAAkB,CAAC;MAClBa,KAAK,EAAGA,KAAK,CAAqCC;IACnD,CAAC,CAAC;EACH;AACD;AAEA,SAAUC,kBAAkB;EAAA,IAAC;IAAEN;EAA2B,CAAC;EAAA,oBAAgB;IAC1E,IAAI;MACH,MAAM;QAAEE,IAAI,EAAE;UAACA,IAAI,EAAE;YAACK;UAAK;QAAE;MAAoD,CAAC,GAAG,MAAMnB,IAAI,CAACW,YAAY,EAAEC,GAAG,CAAC;MAClH,MAAMX,GAAG,CACRK,qBAAqB,CAAC;QACrBc,SAAS,EAAED;MACZ,CAAC,CAAC,CACF;IACF,CAAC,CAAC,OAAOH,KAAK,EAAE;MACfX,qBAAqB,CAAC;QACrBW,KAAK,EAAGA,KAAK,CAAqCC;MACnD,CAAC,CAAC;IACH;EACD,CAAC;AAAA;AAGD,UAAUI,UAAU,GAAG;EACtB,MAAMnB,UAAU,CAACK,oBAAoB,EAAEM,eAAe,CAAC;EACvD,MAAMX,UAAU,CAACM,uBAAuB,EAAEU,kBAAkB,CAAC;AAE9D;AAEA,eAAeG,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}